#!/usr/bin/env bash
#
# Fork a Git repository.

ORIGIN='https://github.com/benwebber/'

usage() {
  cat<<EOF
usage: git fork <repo>

Clone a repository and name the original remote 'upstream'.
EOF
}

fork() {
  local repo=$1
  local repo_name="${1##*/}"
  repo_name="${repo_name/%.git/}"
  git clone -o upstream $repo
  cd $repo_name
  git remote add origin "${ORIGIN}${repo_name}"
}

main() {
  while getopts 'h' opt; do
    case $opt in
      h)
        usage
        exit
        ;;
      *)
        usage
        exit 1
        ;;
    esac
  done
  [[ -z $1 ]] && usage || fork "${1}"
}

main "${@}"
